# Backend (FastAPI) environment - PROD (safe defaults)
PDS_ENV=prod

DATABASE_URL=postgresql+psycopg2://USER:PASS@HOST:PORT/DBNAME?sslmode=require

# MQTT settings (unused when ENABLE_MQTT_CONSUMER=false)
MQTT_BROKER_HOST=127.0.0.1
MQTT_BROKER_PORT=1883
MQTT_USERNAME=your_mqtt_user
MQTT_PASSWORD=your_mqtt_pass
MQTT_PROTOCOL=v311

# Startup behavior (safe by default)
AUTO_CREATE_DB=false
AUTO_SEED_GODOWNS=false
AUTO_SEED_CAMERAS_FROM_EDGE=false
AUTO_SEED_RULES=false
ENABLE_MQTT_CONSUMER=false
ENABLE_DISPATCH_WATCHDOG=false
ENABLE_DISPATCH_PLAN_SYNC=false

# Auth (required in prod)
PDS_AUTH_DISABLED=false
# Must be >= 20 chars and not demo/change-me; service will refuse weak values in prod.
PDS_AUTH_TOKEN=change-me-strong-token
# Service token used by edge for /api/v1/authorized-users/face-index (header-only Bearer token).
# Preferred: set AUTHORIZED_USERS_SERVICE_TOKEN. Backward-compatible fallback is EDGE_BACKEND_TOKEN.
AUTHORIZED_USERS_SERVICE_TOKEN=change-me-edge-service-token
EDGE_BACKEND_TOKEN=change-me-edge-service-token

# API safety limits
API_MAX_PAGE_SIZE=200
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPS=5
RATE_LIMIT_BURST=20
MAX_JSON_BODY_BYTES=1048576
MAX_UPLOAD_BYTES=10485760

# Watchlist storage inside container
WATCHLIST_STORAGE_BACKEND=local
WATCHLIST_STORAGE_DIR=/opt/app/data/watchlist
WATCHLIST_IMAGE_BASE_URL=https://your-domain.example/media/watchlist

# Notifications (disabled unless configured)
WHATSAPP_PROVIDER=log
WHATSAPP_WEBHOOK_URL=
WHATSAPP_HTTP_URL=
WHATSAPP_HTTP_TOKEN=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=
SMTP_USE_TLS=true
